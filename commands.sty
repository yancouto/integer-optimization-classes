% Environments
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lema}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{exercise}[theorem]{Exercise}
\theoremstyle{definition}
\newtheorem*{definition}{Definition}
\newtheorem*{recall}{Recall}

\newenvironment{optimize}[1]
 {\begin{equation}\@ifnotmtarg{#1}{\tag{#1}}\begin{aligned}}
 {\end{aligned}\end{equation}}

% Operators
\newcommand{\x}{\times}

\renewcommand{\d}{\updelta}
\newcommand{\dout}{\updelta^{\mathit{out}}}
\newcommand{\din}{\updelta^{\mathit{in}}}

% Common Vars
\newcommand{\R}{\mathbb{R}}
\newcommand{\Rp}{\mathbb{R}_+}
\newcommand{\Rpp}{\mathbb{R}_{++}}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Zp}{\mathbb{Z_+}}
\newcommand{\Zpp}{\mathbb{Z_{++}}}

\newcommand{\Q}{\mathbb{Q}}

\newcommand{\N}{\mathbb{N}}

\newcommand{\mC}{\mathcal{C}}

\newcommand{\mP}{\mathcal{P}}
\newcommand{\mF}{\mathcal{F}}
\newcommand{\mH}{\mathcal{H}}
\newcommand{\mE}{\mathcal{E}}
\newcommand{\mB}{\mathcal{B}}

\newcommand{\ones}{\mathds{1}}

\newcommand{\coloneqq}{\vcentcolon=}
\newcommand{\eqqcolon}{=\vcentcolon}

% Math operators
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\aff}{aff}
\DeclareMathOperator{\conv}{conv}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

% Extra
\renewcommand{\emph}[1]{\underline{\smash{#1}}}
\newcommand{\true}{\text{true}}
\newcommand{\false}{\text{false}}

% Copied
% Pretty bar
\newsavebox\myboxA
\newsavebox\myboxB
\newlength\mylenA

\newcommand*\xbar[2][0.75]{%
    \sbox{\myboxA}{$\m@th#2$}%
    \setbox\myboxB\null% Phantom box
    \ht\myboxB=1.1\ht\myboxA%
    \dp\myboxB=\dp\myboxA%
    \wd\myboxB=#1\wd\myboxA% Scale phantom
    \sbox\myboxB{$\m@th\overline{\copy\myboxB}$}%  Overlined phantom
    \setlength\mylenA{\the\wd\myboxA}%   calc width diff
    \addtolength\mylenA{-\the\wd\myboxB}%
    \ifdim\wd\myboxB<\wd\myboxA%
       \rlap{\hskip 0.5\mylenA\usebox\myboxB}{\usebox\myboxA}%
    \else
        \hskip -0.5\mylenA\rlap{\usebox\myboxA}{\hskip 0.5\mylenA\usebox\myboxB}%
    \fi}

\newcommand{\xb}{\xbar{x}}
